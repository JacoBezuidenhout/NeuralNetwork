var thread = require("../bin/thread.js");
var starts = new Date().getTime();
var t = process.argv[2];
thread.Initialize({
	Port: 9898,
	MaxThreads: t,
	LogLevel: 0
});
thread.Events.OnFinish = function() {
	var end = new Date().getTime();
	var diff = new Date(end-starts)
	console.log("Time used: "+diff.getMinutes() + ":"+diff.getSeconds()+":"+diff.getMilliseconds());
	thread.End();
	process.exit(0);
};
var Task = new thread.BaseTask(function(workerID) {
	var d = 0;
	for (var i = 0; i < 999999999; i++) {
		d += i * 90 -32;
	};
	return d;
});
for (var i = 0; i < 8; i++) {
	thread.CreateThread(Task);
};
// thread.End();
